# FxEngine 时间线系统 · 红线（Constraints）

## 禁止的技术选型/架构

- 禁止跨线程直接操作 Minecraft 世界/实体（仅服务器主线程 Tick）。
- 禁止引入重型调度框架或外部依赖。
- 禁止在回调里进行阻塞 I/O、网络请求或磁盘读写。
- 禁止将客户端类用于服务器端逻辑。

## 禁止的代码实践

- 禁止无上限地创建/持有 Track（必须走预算与合并流程）。
- 禁止在回调中刷屏日志；默认 INFO 以下静默。
- 禁止泄露 Handle 或对已 STOP 的 Track 重复操作（需幂等）。

## 安全红线

- 预算控制开启时，任何路径下不得突破 perLevel/perOwner 上限。
- 对异常进行隔离处理，防止影响游戏主循环。
- 在区块未加载时不得强行加载区块（避免卡顿）。

## 性能红线

- onTick 默认每 tick 不超过 1 次；复杂 FX 必须设置 tickInterval≥2。
- 默认关闭预算功能；开启时，需验证活跃数、丢弃率在可控范围内。
- 单 Level 活跃 FX 建议软阈值 128、硬阈值 256；Owner 建议 8/16。

